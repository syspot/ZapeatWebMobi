<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:f="http://java.sun.com/jsf/core"
	template="index.xhtml" 	xmlns:p="http://primefaces.org/ui">

<ui:define name="conteudo">

<div data-role="page" id="sobre">
    <div data-theme="f" data-role="header">
        <h3>
            
        </h3>
		<h:panelGroup rendered="#{!empty detalhamentoFaces.categoriaId}">
	        <a data-role="button" rel="external" data-transition="fade" href="listagem.xhtml?categoriaId=#{detalhamentoFaces.categoriaId}" data-icon="arrow-l"
	        data-iconpos="left" class="ui-btn-left">
	            voltar
	        </a>
        </h:panelGroup>
    
   		<h:panelGroup rendered="#{empty detalhamentoFaces.categoriaId}">
         <a data-role="button" rel="external" data-transition="fade" href="menu.xhtml" data-icon="grid"
       			 data-iconpos="left" class="ui-btn-left">
            menu
        </a>
        </h:panelGroup>
  	
  		<h:panelGroup rendered="#{!empty detalhamentoFaces.categoriaId}">
    	    <a data-role="button" rel="external" data-transition="fade" href="menu.xhtml" data-icon="grid"
        	data-iconpos="left" class="ui-btn-right">
            	menu
	        </a>
        </h:panelGroup>
    </div>
    
    <div data-role="content" style="padding: 0px">
    	<div id="topoPromo">
            <div class="marca">
                <figure>
             	   <a href="estabelecimento.xhtml?fornecedorId=#{detalhamentoFaces.promocaoModel.fornecedorModel.id}&amp;promocaoId=#{detalhamentoFaces.promocaoModel.id}&amp;categoriaId=#{detalhamentoFaces.categoriaId}" rel="external"  data-transition="slide">
               			<h:graphicImage value="img/model/80x80.jpg" rendered="#{empty detalhamentoFaces.promocaoModel.fornecedorModel.imagemThumb}"/>
               			<h:graphicImage value="#{detalhamentoFaces.promocaoModel.fornecedorModel.imagemThumbView}" rendered="#{!empty detalhamentoFaces.promocaoModel.fornecedorModel.imagemThumb}"/>
              		</a>
           		</figure>
                		
            </div>
                <div class="tipoPromocao">#{detalhamentoFaces.promocaoModel.tipoPromocaoModel.descricao}</div>
                <div class="nomePromocao">#{detalhamentoFaces.promocaoModel.titulo}</div>

            <h:form>
	            <span class="btnIndicar" id="btnindicar">
		            <p:commandLink process="@form" action="#{detalhamentoFaces.indicar}" update="@form" rendered="#{!detalhamentoFaces.promocaoModel.indicada}">
		            	Eu indico
		           	</p:commandLink>
		           	<p:commandLink  disabled="true" rendered="#{detalhamentoFaces.promocaoModel.indicada}">
		            	Você indicou isto!
		           	</p:commandLink>
	           	</span>
           	</h:form>
        </div>
    	<div class="mapa">
        	  <div id="map" style="width: 345px; height: 250px;"></div>
              <script type="text/javascript">
				var locations = [
				  ['${detalhamentoFaces.promocaoModel.fornecedorModel.nomeFantasiaSemApostrofe}',${detalhamentoFaces.promocaoModel.fornecedorModel.latitude},${detalhamentoFaces.promocaoModel.fornecedorModel.longitude}, 4]
				];
			
				var map = new google.maps.Map(document.getElementById('map'), {
				  zoom: 10,
				  center: new google.maps.LatLng(${detalhamentoFaces.promocaoModel.fornecedorModel.latitude},${detalhamentoFaces.promocaoModel.fornecedorModel.longitude}),
				  mapTypeId: google.maps.MapTypeId.ROADMAP
				});
			
				var infowindow = new google.maps.InfoWindow();
			
				var marker, i;
				  marker = new google.maps.Marker({
					position: new google.maps.LatLng(locations[0][1], locations[0][2]),
					map: map
				  });
			
				  google.maps.event.addListener(marker, 'click', (function(marker, i) {
					return function() {
					  infowindow.setContent(locations[0][0]);
					  infowindow.open(map, marker);
					}
				  })(marker, i));
              
			  </script>
        </div>
        <div id="infoPromo">
            <p class="titulo">Sobre a promoção</p>
            <div class="dados">
                <p>#{detalhamentoFaces.promocaoModel.descricao}</p>
                <!--<p><b>PERÍODO DA PROMOÇÃO</b></p>
                <p>- Terça a Quinta das 11h às 12 horas</p>
                <p>- Sexta e Sábado das 18h às 19 horas</p>
                <p>- Domingo das 13h as 14 horas</p>-->
            </div>
    
            <!--SE FOR PROMOÇÃO POR DESCONTO-->
            <div id="desconto">
                <p class="percentual">
                	<h:outputText value="#{detalhamentoFaces.promocaoModel.porcentagemDesconto}">
                		<f:convertNumber type="number" minFractionDigits="2" locale="pt_BR" />
                	</h:outputText>%
                </p>
                <p>desconto</p>
            </div>
            <span class="preco">
            De 
            <h:outputText value="#{detalhamentoFaces.promocaoModel.precoOriginal}">
            	<f:convertNumber type="currency" currencySymbol="R$" locale="pt_BR"/>
            </h:outputText> 
            
            por
            <h:outputText  value="#{detalhamentoFaces.promocaoModel.precoPromocional}">
            	<f:convertNumber type="currency" currencySymbol="R$" locale="pt_BR"/>
            </h:outputText> 
            </span>
        </div>
        <div id="infoEstab">
            <p class="titulo">Sobre o Estabelecimento</p>
            <p class="endereco">
                <span class="map"></span>#{detalhamentoFaces.promocaoModel.fornecedorModel.enderecoConcatenado}
            </p>
            <a href="callto:#{detalhamentoFaces.promocaoModel.fornecedorModel.telefone}">
            <p class="tel">
                <span class="tel"></span>#{detalhamentoFaces.promocaoModel.fornecedorModel.telefone}
            </p>
            </a>
        </div> 
	</div>    
</div>
</ui:define>
</ui:composition>
