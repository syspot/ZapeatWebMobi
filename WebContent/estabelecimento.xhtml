<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" template="index.xhtml" xmlns:p="http://primefaces.org/ui" >

<ui:define name="conteudo">
<!-- Estabelecimento -->
<div data-role="page" id="estabelecimento">
    <div data-theme="f" data-role="header">
        <h3>
            
        </h3>
        <a data-role="button" data-transition="fade" href="detalhamento.xhtml?categoriaId=#{estabelecimentoFaces.categoriaModel.id}&amp;promocaoId=#{estabelecimentoFaces.promocaoId}" data-icon="arrow-l"
        data-iconpos="left" class="ui-btn-left">
            voltar
        </a>
        <a data-role="button" rel="external" data-transition="fade" href="menu.xhtml" data-icon="grid"
        data-iconpos="left" class="ui-btn-right">
            menu
        </a>
    </div>
    
    <div data-role="content" style="padding: 0px">
    	<div id="topoPromo">
            <div class="marca">
                <figure>
                		<h:graphicImage value="img/model/80x80.jpg" rendered="#{empty estabelecimentoFaces.fornecedorModel.imagemThumb}"/>
		                <h:graphicImage value="#{estabelecimentoFaces.fornecedorModel.imagemThumbView}" rendered="#{empty estabelecimentoFaces.fornecedorModel.imagemThumb}"/>
                </figure>
            </div>
            <!--<div class="info">-->
                <div class="nomeEstab">#{estabelecimentoFaces.fornecedorModel.nomeFantasia}</div>
                <div class="categoria">#{estabelecimentoFaces.categoriaModel.descricao}</div>
                
                <span class="indicacao">
                	<h:outputText value="#{estabelecimentoFaces.fornecedorModel.quantidadeIndicacoes} indicação" rendered="#{estabelecimentoFaces.fornecedorModel.quantidadeIndicacoes==1}"/>
                	<h:outputText value="Nenhuma indicação" rendered="#{estabelecimentoFaces.fornecedorModel.quantidadeIndicacoes==0}"/>
                	<h:outputText value="#{estabelecimentoFaces.fornecedorModel.quantidadeIndicacoes} indicações" rendered="#{estabelecimentoFaces.fornecedorModel.quantidadeIndicacoes>1}"/>
                </span>
            <!--</div>-->
            <h:form>
  				<span class="btnIndicar" id="btnindicar">
		            <p:commandLink process="@form" action="#{estabelecimentoFaces.indicar}" update="@form" rendered="#{!estabelecimentoFaces.fornecedorModel.indicado}">
		            	Eu indico
		           	</p:commandLink>
		           	<p:commandLink  disabled="true" rendered="#{estabelecimentoFaces.fornecedorModel.indicado}">
		            	Você indicou isto!
		           	</p:commandLink>
	           	</span>
		</h:form>
        </div>
    	<div class="mapa">
            <figure><img src="img/model/590x260.jpg" width="320" height="160" alt="IMAGEM DO ESTABELECIMENTO. PODE SER A DO SITE WEB"/></figure>
        </div>
        <div id="infoPromo">
            <p class="titulo">Sobre o Estabelecimento</p>
            <div class="dadosEstab">
                <p>
                <h:outputText value="#{estabelecimentoFaces.fornecedorModel.descricao}" rendered="#{!empty estabelecimentoFaces.fornecedorModel.descricao}"/>
                <h:outputText value="Nenhuma informação foi provida sobre este estabelecimento" rendered="#{empty estabelecimentoFaces.fornecedorModel.descricao}"/>
                </p>

            </div>
    
            <!--SE FOR PROMOÇÃO POR DESCONTO-->
            
        </div>
        <div id="infoEstab">
            <p class="titulo">Outras informações</p>
            <p class="endereco">
                <span class="map"></span>#{estabelecimentoFaces.fornecedorModel.enderecoConcatenado}
            </p>
            <a href="callto:#{estabelecimentoFaces.fornecedorModel.telefone}">
                <p class="tel"><span class="tel"></span>#{estabelecimentoFaces.fornecedorModel.telefone}</p>
            </a>
            <div class="pagamento">
                <p>Formas de Pagamento</p>
                <figure class="cartao visa"></figure>
                <figure class="cartao master"></figure>
                <figure class="cartao amex"></figure>
                <figure class="cartao diners"></figure>
            </div>
        </div> 
	</div>    
</div>
</ui:define>
</ui:composition>
